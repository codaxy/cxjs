@use "sass:map";
@use "../../variables.scss" as *;
@use "cx/src/widgets/nav/Tab.maps.scss" as *;
@use "cx/src/util/scss/deep-merge" as *;
@use "cx/src/util/scss/clockwise" as *;
@use "cx/src/util/scss/calc" as *;

// =============================================================================
// TAB - Map Overrides
// =============================================================================
// Note: color-mix() calculations are placed directly in the maps (not in
// intermediate CSS variables) so that sub-theming works correctly.
// See meta/CSS_VARIABLES.md for details on this limitation.

$cx-tab-state-style-map: cx-deep-map-merge(
   $cx-tab-state-style-map,
   (
      default: (
         color: var(--cx-theme-color),
         background-color: transparent,
         border-color: transparent,
         border-radius: var(--cx-theme-border-radius),
         line-height: $cx-default-box-line-height,
         padding: cx-top($cx-default-box-padding) cx-multiply(cx-right($cx-default-box-padding), 2) cx-bottom($cx-default-box-padding) cx-multiply(cx-left($cx-default-box-padding), 2),
         transition: var(--cx-theme-transition),
      ),
      hover: (
         background-color: color-mix(in srgb, var(--cx-theme-active-state-color), transparent 96%),
      ),
      cursor: (
         background-color: color-mix(in srgb, var(--cx-theme-active-state-color), transparent 92%),
         outline: none,
      ),
      focus: (
         box-shadow: var(--cx-theme-focus-box-shadow),
      ),
      selected: (
         background-color: var(--cx-theme-primary-color),
         color: var(--cx-theme-background-color),
         font-weight: $cx-default-tab-font-weight,
      ),
      selected-cursor: (
         color: var(--cx-theme-background-color),
         background-color: color-mix(in srgb, var(--cx-theme-primary-color), var(--cx-theme-background-color) 20%),
      ),
      active: (
         color: var(--cx-theme-primary-color),
         background-color: transparent,
      ),
      disabled: (
         color: color-mix(in srgb, var(--cx-theme-color), transparent 62%),
         background-color: transparent,
      ),
   )
);

$cx-tab-mods: cx-deep-map-merge(
   $cx-tab-mods,
   (
      classic: (
         default: (
            line-height: $cx-default-box-line-height - 2px,
            border-bottom-width: 0,
            border-left-width: 0,
            border-color: var(--cx-theme-border-color),
            box-shadow: none,
            border-radius: 0,
         ),
         hover: (
            color: var(--cx-theme-color),
            background-color: color-mix(in srgb, var(--cx-theme-active-state-color), transparent 96%),
         ),
         cursor: (
            background-color: color-mix(in srgb, var(--cx-theme-active-state-color), transparent 92%),
            color: var(--cx-theme-color),
            outline: none,
         ),
         selected: (
            color: var(--cx-theme-color),
            font-weight: $cx-default-tab-font-weight,
            background-color: var(--cx-theme-background-color),
            border-top-color: var(--cx-theme-primary-color),
         ),
         selected-cursor: (
            color: var(--cx-theme-color),
            background-color: var(--cx-theme-background-color),
            border-top-color: color-mix(in srgb, var(--cx-theme-primary-color), var(--cx-theme-background-color) 30%),
         ),
         active: (
            background-color: transparent,
         ),
         disabled: (
            background-color: transparent,
            color: color-mix(in srgb, var(--cx-theme-color), transparent 62%),
         ),
      ),
      line: (
         default: (
            border-bottom-width: 2px,
            line-height: $cx-default-box-line-height - 4px,
            padding: $cx-default-box-padding 0,
            margin: 0 15px,
         ),
         hover: (
            border-color: transparent,
            color: var(--cx-theme-color),
            background-color: transparent,
         ),
         cursor: (
            color: var(--cx-theme-color),
            font-weight: $cx-default-tab-font-weight,
            border-color: color-mix(in srgb, var(--cx-theme-active-state-color), transparent 80%),
            background-color: transparent,
         ),
         selected: (
            box-shadow: none,
            color: var(--cx-theme-color),
            font-weight: $cx-default-tab-font-weight,
            border-color: var(--cx-theme-primary-color),
            background-color: transparent,
         ),
         selected-cursor: (
            color: var(--cx-theme-color),
            font-weight: $cx-default-tab-font-weight,
            border-color: color-mix(in srgb, var(--cx-theme-primary-color), var(--cx-theme-background-color) 30%),
            background-color: transparent,
         ),
      ),
   )
);
